// таблица объектов
table struct obj_tbl (
  nrec    : comp,
  code		: string[100],
  vol		: word,
  obj		: comp,
  node		: comp,
  name		: string[100],
  abbr		: string[100],
  unit		: string[20],

  sootAn		    : word,
  sootAnNRec    : comp,
  sootAnCode		: string[100],
  sootAnName		: string[100],

  SortingCode   : String[100],

  printedAt : word,

  anNode        : comp,
  Stage         : byte // флаг обработки

)
with index (
  obj_tbl00 = nrec(Unique, Surrogate),
  obj_tbl01 = obj,
  obj_tbl02 = stage + sortingcode,
  obj_tbl021 = code,
  obj_tbl03 = node + code,
  obj_tbl04 = Stage,
  obj_tbl05 = Stage + sootAnNRec,
  obj_tbl06 = Stage + obj,
  obj_tbl07 = Stage + node

);

/*

table struct obj_tblst2 (
  code		: string,
  vol		: word,
  obj		: comp,
  node		: comp,
  name		: string,
  abbr		: string,
  unit		: string,

  sootAn		    : word,
  sootAnNRec    : comp,
  sootAnCode		: string,
  sootAnName		: string,

  SortingCode   : String,
  anNode        : comp,
  Stage         : byte // флаг обработки

)
with index (
  obj_tbl01 = obj,
  obj_tbl02 = stage + sortingcode,
  obj_tbl021 = code,
  obj_tbl03 = node + code,
  obj_tbl04 = Stage,
  obj_tbl05 = Stage + sootAnNRec,
  obj_tbl06 = Stage + obj

)
;
*/

// таблица данных
table struct plan_tbl (
  nrec  : comp,
  obj		: comp,
  col		: word,
  per		: word,
  base_val	: double,
  plan_val	: double,
  fact_val	: double,

  printedAt : word,

  stage     : byte
)
with index (
  plan_tbl00 = nrec(Unique, Surrogate),

  plan_tbl01 = stage + obj + col + per (unique),
  plan_tbl02 = obj + col + per ,
  plan_tbl03 = stage + obj,
  plan_tbl04 = stage
);

table struct plan_tblDbg (
  nrec  : comp,
  obj		: comp,
  col		: word,
  per		: word,
  name  : String,
  iArticle  : word,
  topArticle  : word,
  iRegister   : byte,
  base_val	: double,
  plan_val	: double,
  fact_val	: double,
  vlu       : double,

  printedAt : word,

  stage     : byte,

  passNo    : byte,

  pvNRec    : comp,
  isGroup   : byte,

  cPer      : comp,
  perName   : String
)
with index (
  plan_tblDbg00 = nrec(Unique, Surrogate)
)
;
